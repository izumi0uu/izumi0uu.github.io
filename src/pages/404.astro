---
import Centered from "@/layouts/Centered.astro";
import _404 from "@/assets/images/404-removebg-preview.png";
import { Image } from "astro:assets";
import { getPageMetadata } from "@/utils/content/metadata";
import { IMAGE_SIZES } from "@/constants/image";
import Button from "@/components/Button.astro";
import { cn } from "@/utils/ui/styles";
import * as m from "@/paraglide/messages";

const metadata = getPageMetadata("404");
---

<Centered {metadata}>
  <div class="h-screen flex flex-col items-center justify-center gap-8 px-4 py-8">
    <!-- 404图片容器 -->
    <div class="relative flex items-center justify-center">
      <!-- 背景光晕效果 -->
      <div class="absolute inset-0 rounded-full bg-primary/20 blur-3xl scale-150"></div>

      <!-- 404图片 - 使用CSS滤镜适应主题 -->
      <Image
        src={_404}
        alt="404 Not Found"
        {...IMAGE_SIZES.RESPONSIVE.ERROR_404}
        class={cn(
          "relative z-10 w-full h-auto object-contain",
          "max-w-xs sm:max-w-sm md:max-w-md lg:max-w-lg xl:max-w-xl",
          "drop-shadow-2xl",
          // 主题适配滤镜
          "theme-adaptive-image"
        )}
      />
    </div>

    <!-- 文字内容 -->
    <div class="text-center space-y-6 max-w-2xl">
      <h1 class={cn("text-4xl sm:text-5xl md:text-6xl lg:text-7xl font-bold", "tracking-tight")}>
        {m["pages.404.description"]()}
      </h1>

      <div class="flex flex-col sm:flex-row gap-4 justify-center items-center pt-8">
        <Button onclick="history.back()" variant="brutal"> Go Back </Button>
      </div>
    </div>
  </div>
</Centered>

<style>
  /* 透明PNG图片主题适配 */
  .theme-adaptive-image {
  }

  :root .theme-adaptive-image {
    filter: brightness(1) contrast(1.1) saturate(1.2);
  }

  :root[data-theme*="dark"] .theme-adaptive-image,
  :root.dark .theme-adaptive-image {
    filter: brightness(0.9) contrast(1.2) saturate(1.1) hue-rotate(10deg);
  }

  /* 酒红主题特殊处理 */
  :root[data-theme*="wine"] .theme-adaptive-image {
    filter: brightness(1.1) contrast(1.1) saturate(1.3) hue-rotate(-10deg);
  }

  :root[data-theme*="wine"][data-theme*="dark"] .theme-adaptive-image {
    filter: brightness(0.8) contrast(1.3) saturate(1.2) hue-rotate(-15deg);
  }
</style>
